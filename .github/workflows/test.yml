name: Website Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    # 1. CORE FILES
    - name: âœ… Check index.html exists
      run: |
        if [ -f "index.html" ]; then 
          echo "âœ… Pages ready!"
        else 
          echo "âŒ No index.html = 404 error"
          exit 1
        fi
    
    # 2. HTML SYNTAX
    - name: ğŸ” HTML Validation
      run: npx @html-validate/cli@latest .
    
    # 3. BROKEN LINKS
    - name: ğŸ”— Check Links
      run: |
        grep -r 'href=' *.html | grep -v '#' | grep -v 'mailto:' | grep -v 'tel:' || true
        echo "âœ… Link scan complete"
    
    # 4. MISSING IMAGES
    - name: ğŸ–¼ï¸ Image Check
      run: |
        find . -name "*.html" -exec grep -l "src.*images" {} \; || true
        find images/ -type f | wc -l
        echo "âœ… Images scanned"
    
    # 5. CSS VALIDATION
    - name: ğŸ¨ CSS Validation
      run: npx stylelint "**/*.css" --quiet || true
    
    # 6. ACCESSIBILITY
    - name: â™¿ Accessibility Scan
      run: npx pa11y-ci *.html || true
    
    # 7. SITE READY
    - name: ğŸš€ Production Check
      run: |
        echo "âœ… CI/CD Pipeline: ALL TESTS PASS"
        echo "ğŸ“± Live: https://willxxx7.github.io/hot-beans-web"
        echo "ğŸ–ï¸ Ready for student deployment"
